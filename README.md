# AI热点新闻自动化采集与文章生成

这个项目可以自动从多个来源获取AI领域的热点新闻，筛选出高质量的内容，然后使用GPT-4o生成可读性强的文章，最后将文章存储为Markdown格式和保存到SQLite数据库中。

## 目录

- [功能特点](#功能特点)
- [项目结构](#项目结构)
- [快速开始](#快速开始)
- [使用方法](#使用方法)
  - [创建虚拟环境](#创建虚拟环境)
  - [安装依赖](#安装依赖)
  - [配置API密钥](#配置api密钥)
  - [运行程序](#运行程序)
  - [选择模型](#选择模型)
  - [可视化进度](#可视化进度)
- [模块说明](#模块说明)
- [示例输出](#示例输出)
- [故障排除](#故障排除)
- [未来计划](#未来计划)
- [性能说明](#性能说明)
- [依赖库](#依赖库)
- [许可证](#许可证)

## 功能特点

1. **多源新闻获取**：从多个AI资讯来源（RSS、网站爬虫、API）获取最新新闻
2. **智能筛选**：通过关键词过滤、去重和热度排序筛选高质量新闻
3. **AI文章生成**：调用OpenAI模型自动生成结构清晰、可读性强的文章
4. **多格式存储**：将生成的文章保存为Markdown文件和SQLite数据库
5. **定时执行**：支持每天定时自动运行
6. **模型选择**：支持选择不同的OpenAI模型来生成文章
7. **可视化进度**：提供彩色输出和进度条，实时显示程序执行状态

## 项目结构

```
ai_news_generator/
├── main.py                # 主程序入口
├── news_fetcher.py        # 新闻获取模块
├── news_filter.py         # 新闻筛选模块
├── article_generator.py   # 文章生成模块
├── article_storage.py     # 文章存储模块
├── scheduler.py           # 定时任务模块
├── config.py              # 配置文件（需要自行创建）
├── config.example.py      # 配置文件示例
├── articles/              # 生成的文章存储目录
├── database/              # SQLite数据库目录
└── requirements.txt       # 项目依赖
```

## 快速开始

如果你想快速开始使用本项目，可以按照以下步骤操作：

```bash
# 克隆项目
git clone https://github.com/princeniu/AInsight.git
cd AInsight

# 创建并激活虚拟环境
python -m venv aInsight
source aInsight/bin/activate  # Linux/macOS
# 或 aInsight\Scripts\activate  # Windows

# 安装依赖
pip install -r requirements.txt

# 创建配置文件
cp config.example.py config.py
# 编辑config.py，设置你的OpenAI API密钥

# 运行程序（带可视化进度）
python main.py --verbose
```

## 使用方法

### 创建虚拟环境

推荐使用虚拟环境来运行此项目，以避免依赖冲突：

```bash
# 创建虚拟环境
python -m venv aInsight

# 在Windows上激活虚拟环境
aInsight\Scripts\activate

# 在macOS/Linux上激活虚拟环境
source aInsight/bin/activate
```

### 安装依赖

在激活的虚拟环境中安装所需依赖：

```bash
pip install -r requirements.txt
```

### 配置API密钥

本项目使用配置文件来存储API密钥和其他设置，这样可以避免将敏感信息提交到版本控制系统：

1. 复制配置文件示例：

```bash
cp config.example.py config.py
```

2. 编辑config.py文件，设置你的OpenAI API密钥：

```python
# OpenAI API配置
OPENAI_API_KEY = "your-openai-api-key-here"

# 模型配置
MODEL_CONFIG = {
    "default_model": "gpt-4o",  # 默认使用的模型
    "available_models": [
        "gpt-4o",        # 最强大的多模态模型
        "gpt-4-turbo",   # 强大的文本模型
        "gpt-3.5-turbo"  # 经济实惠的模型
    ]
}

# 定时任务配置
SCHEDULE_TIME = "08:00"  # 每天运行的时间

# 文章生成配置
MAX_ARTICLES_PER_RUN = 5  # 每次运行最多生成的文章数量
```

注意：config.py文件已添加到.gitignore中，不会被提交到Git仓库。

### 运行程序

手动运行：

```bash
python main.py
```

定时运行（按照config.py中设置的时间自动执行）：

```bash
python scheduler.py
```

### 选择模型

本项目支持选择不同的OpenAI模型来生成文章。你可以通过以下方式选择模型：

1. **在配置文件中设置默认模型**：

```python
MODEL_CONFIG = {
    "default_model": "gpt-4o",  # 修改为你想要的默认模型
    "available_models": [
        "gpt-4o",
        "gpt-4-turbo",
        "gpt-3.5-turbo"
    ]
}
```

2. **通过命令行参数指定模型**：

```bash
# 使用特定模型运行
python main.py --model gpt-4-turbo

# 查看可用模型列表
python main.py --list-models

# 使用特定模型运行定时任务
python scheduler.py --model gpt-3.5-turbo
```

3. **不同模型的特点**：

- **gpt-4o**：最强大的多模态模型，生成质量最高，但API调用成本较高
- **gpt-4-turbo**：强大的文本模型，生成质量高，API调用成本中等
- **gpt-3.5-turbo**：经济实惠的模型，生成质量良好，API调用成本低

选择模型时，可以根据你的需求和预算进行平衡。生成的文章会自动记录使用的模型信息。

### 可视化进度

本项目支持可视化进度显示，让你能够实时了解程序的执行状态。使用以下命令启用可视化进度：

```bash
# 运行主程序并显示详细进度
python main.py --verbose

# 运行定时任务并显示详细进度
python scheduler.py --verbose

# 测试文章生成模块并显示详细进度
python article_generator.py --verbose
```

可视化进度功能包括：

1. **彩色状态输出**：不同类型的信息使用不同颜色显示，例如：
   - 绿色：成功信息
   - 黄色：警告和处理中的状态
   - 红色：错误信息
   - 蓝色：一般信息

2. **进度条**：显示各个步骤的完成百分比，包括：
   - 新闻获取进度
   - 新闻筛选进度
   - 文章生成总进度
   - 单篇文章生成进度
   - 文章保存进度

3. **实时状态更新**：
   - 显示当前正在处理的任务
   - 显示API请求状态
   - 显示操作耗时
   - 显示文章预览

4. **定时任务状态**：
   - 显示下一次执行时间和倒计时
   - 实时显示主程序的输出
   - 显示任务执行结果

这些可视化功能使你能够更好地了解程序的运行状态，特别是在生成文章这样耗时的操作中，你可以实时看到进度而不是等待黑盒操作完成。

## 模块说明

### 1. news_fetcher.py

从多个来源获取AI相关新闻，包括：
- OpenAI官方博客
- DeepMind
- TechCrunch AI频道
- Reddit AI话题
- Hacker News AI相关帖子

**输出格式**：JSON格式的新闻列表

### 2. news_filter.py

筛选高质量新闻，功能包括：
- 去重：过滤相似新闻
- 关键词匹配：确保内容与AI相关
- 时间排序：优先处理最新新闻
- 热度排序：优先处理热门新闻

**输入/输出**：JSON格式的新闻列表

### 3. article_generator.py

使用OpenAI模型生成高质量文章，特点包括：

#### 提示词系统
- **今日头条风格**：专门针对今日头条平台优化的爆款文章生成系统
- **标题优化**：使用"震惊！"、"重磅！"等爆款标题公式
- **结构优化**：
  - 开头设置悬念，第一段直击痛点
  - 短段落设计，每段不超过3句话
  - 情绪化表达，使用"爆"、"绝了"等词增加传播性
  - 大量使用表情符号增加亲和力
  
#### 内容策略
- **可读性**：将复杂AI概念转化为通俗易懂的解释
- **互动性**：设置3-5个引导读者思考或评论的问题
- **传播性**：
  - 制造信息差和独家感
  - 添加虚构的"知情人士"观点增加可信度
  - 强调新闻对普通人的影响
  - 结合热点话题和流行梗
  
#### 技术特点
- 支持多个OpenAI模型（gpt-4o、gpt-4-turbo、gpt-3.5-turbo）
- 智能重试机制和错误处理
- 实时显示生成进度和预览
- 自动优化标题吸引力

**输出格式**：结构化的文章内容，包含标题、正文和元数据

### 4. article_storage.py

存储生成的文章，支持：
- Markdown格式（保存到articles目录）
- SQLite数据库（ID、标题、内容、发布日期、使用的模型）

**输入**：文章标题、内容、原始链接、发布日期、使用的模型

### 5. scheduler.py

定时运行任务，支持：
- 使用schedule库设置定时任务
- 适配cron定时任务
- 支持指定使用的模型
- 彩色输出和实时状态显示
- 显示下一次执行时间和倒计时

### 6. config.py

配置文件，包含：
- OpenAI API密钥
- 模型配置（默认模型和可用模型列表）
- 定时任务配置
- 文章生成配置

## 示例输出

以下是使用本项目生成的文章示例：

```markdown
# GPT-4o震撼发布：AI多模态能力迎来质的飞跃

📅 2023-05-20  
🔗 [阅读原文](https://example.com/news/1)  
模型: gpt-4o

## 引言

你是否曾想过，人工智能能否真正理解我们的语言、图像和声音？🤔 OpenAI最新发布的GPT-4o模型或许给出了肯定的答案。这款全新模型不仅在性能上全面超越前代产品，更在多模态理解能力上实现了质的飞跃。

## GPT-4o：超越想象的多模态能力

GPT-4o最大的突破在于其强大的多模态能力。它可以同时处理文本、图像、音频和视频，并在这些不同形式的信息之间建立联系。这意味着你可以向它展示一张照片，它不仅能识别照片中的内容，还能理解照片背后的故事和情感。

实时语音交互是GPT-4o的另一大亮点。与以往的模型相比，GPT-4o的响应速度提升了10倍，使得与AI的对话体验更加自然流畅，就像与真人交谈一样。

## 技术背后的突破

GPT-4o采用了全新的神经网络架构，通过创新的训练方法，使模型能够更好地理解不同模态之间的关联。这种架构不仅提高了模型的理解能力，还大幅降低了推理延迟。

## 行业专家怎么看？

著名AI研究员李明教授表示："GPT-4o代表了大语言模型的一个重要里程碑。它的多模态能力已经接近人类水平，这将彻底改变人机交互的未来。"

微软AI部门负责人张伟博士则指出："GPT-4o的商业价值不可估量。它将使企业能够开发更自然、更直观的AI应用，为用户提供前所未有的体验。"

## 未来展望

GPT-4o的发布无疑将加速AI在各行各业的应用。从医疗诊断到教育辅导，从客户服务到创意设计，我们将看到AI承担越来越重要的角色。

然而，这也带来了新的挑战。随着AI变得越来越强大，如何确保它的安全、公平和负责任使用将变得更加重要。

## 结论

GPT-4o的发布标志着AI发展的新纪元。它不仅展示了技术的进步，也预示着人类与AI关系的新阶段。在这个阶段，AI将成为我们更加可靠、透明和强大的合作伙伴。

你认为GPT-4o会如何改变你的工作和生活？AI的这些进步是否让你感到兴奋或担忧？欢迎在评论区分享你的想法！
```

生成的文章将保存在`articles`目录下，并同时存储在SQLite数据库中。

## 故障排除

### OpenAI API密钥问题
- **问题**: `未设置API密钥，请在config.py中设置OPENAI_API_KEY`
- **解决方案**: 确保已正确创建并配置config.py文件：
  ```python
  # 在config.py中设置
  OPENAI_API_KEY = "your-openai-api-key-here"
  ```

### 依赖安装问题
- **问题**: 安装依赖时出现错误
- **解决方案**: 尝试更新pip后再安装：`pip install --upgrade pip`

### 网络连接问题
- **问题**: 无法获取新闻或API调用失败
- **解决方案**: 检查网络连接，确保能够访问相关网站和OpenAI API

### RSS源失效问题
- **问题**: 某些RSS源无法获取新闻
- **解决方案**: 程序设计为容错的，即使某些源失效也不会影响整体运行。可以在`news_fetcher.py`中更新或添加新的RSS源

### 模型选择问题
- **问题**: 指定的模型不可用
- **解决方案**: 确保在config.py的MODEL_CONFIG中正确配置了可用模型，或者使用`--list-models`参数查看可用模型列表

### 可视化进度问题
- **问题**: 进度条显示异常或颜色不正确
- **解决方案**: 确保终端支持ANSI颜色，或者尝试更新colorama库：`pip install --upgrade colorama`

## 未来计划

- [ ] 添加Web界面，方便查看和管理文章
- [ ] 支持更多新闻来源
- [ ] 实现自动发布到社交媒体平台
- [ ] 添加文章质量评估系统
- [ ] 优化文章生成速度
- [ ] 支持多语言新闻采集和文章生成
- [ ] 添加更多OpenAI模型的支持
- [ ] 增强可视化界面，添加更多交互功能

## 性能说明

- **硬件需求**: 本项目不需要特殊硬件，普通PC即可运行
- **运行时间**: 完整流程（获取新闻、筛选、生成5篇文章）大约需要3-5分钟
- **API用量**: 每生成一篇文章约消耗2000-3000 tokens，请注意OpenAI API的使用限制和费用
  - gpt-4o: 约$0.05-0.10/文章
  - gpt-4-turbo: 约$0.03-0.06/文章
  - gpt-3.5-turbo: 约$0.01-0.02/文章
- **存储需求**: 数据库和文章存储通常不会超过几MB，除非长期运行收集大量文章

## 依赖库

- feedparser：解析RSS源
- requests：发送HTTP请求
- beautifulsoup4：解析HTML页面
- openai：调用OpenAI API
- schedule：定时任务管理
- python-dateutil：日期处理
- nltk & scikit-learn：文本相似度计算
- sqlite3：数据库操作（Python标准库）
- tqdm：显示进度条
- colorama：终端彩色输出

## 许可证

本项目采用 MIT 许可证 - 详情请查看 [LICENSE](LICENSE) 文件 